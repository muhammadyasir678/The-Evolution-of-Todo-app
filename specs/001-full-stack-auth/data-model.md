# Data Model: Full-Stack Web Application with Authentication

## Overview
Data model for the full-stack web application with user authentication and task management functionality.

## Entities

### User (Managed by Better Auth)
- **id**: string (UUID, primary key)
  - Unique identifier for the user
  - Auto-generated by the authentication system
- **email**: string (unique, indexed)
  - User's email address for authentication
  - Required field for account creation
- **name**: string
  - User's display name
  - Optional field, may be derived from email if not provided
- **created_at**: timestamp
  - Timestamp when the user account was created
  - Auto-populated by the authentication system

### Task
- **id**: integer (primary key, auto-increment)
  - Unique identifier for each task
  - Auto-generated sequence number
- **user_id**: string (foreign key → users.id, indexed)
  - Reference to the user who owns this task
  - Ensures data isolation between users
- **title**: string (not null, max 200)
  - Title of the task
  - Required field with character limit validation
- **description**: text (nullable, max 1000)
  - Optional detailed description of the task
  - May be null if no additional details are provided
- **completed**: boolean (default false)
  - Completion status of the task
  - Boolean flag indicating if the task is completed
- **created_at**: timestamp (auto)
  - Timestamp when the task was created
  - Auto-populated when record is inserted
- **updated_at**: timestamp (auto)
  - Timestamp when the task was last updated
  - Auto-updated when record is modified

## Relationships

### User → Task (One-to-Many)
- One user can have many tasks
- Each task belongs to exactly one user
- Foreign key constraint ensures referential integrity
- Index on user_id enables efficient querying of user-specific tasks

## Validation Rules

### User Validation
- Email must be in valid email format
- Email must be unique across all users
- Email length must comply with standard email length limits

### Task Validation
- Title is required and must be 1-200 characters
- Description, if provided, must be no more than 1000 characters
- user_id must reference an existing user
- Completed status defaults to false when task is created
- user_id must match the authenticated user's ID for all operations

## Constraints

### Primary Keys
- User.id: UUID-based unique identifier
- Task.id: Auto-incrementing integer identifier

### Foreign Keys
- Task.user_id references User.id
- Enforced by database foreign key constraint

### Indexes
- User.email: Unique index for fast authentication lookups
- Task.user_id: Index for efficient user-specific queries
- Task.completed: Index for filtering completed/incomplete tasks

## State Transitions

### Task Completion States
- Incomplete (completed = false) → Complete (completed = true)
  - Triggered when user marks task as complete
- Complete (completed = true) → Incomplete (completed = false)
  - Triggered when user unmarks task as complete

## Access Control
- All task operations require user authentication
- Users can only access tasks belonging to their own user_id
- Backend enforces user_id matching between JWT token and requested data